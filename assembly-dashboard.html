<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assembly Dashboard</title>
    <link rel="stylesheet" href="assembly-dashboard.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body class="WhiteBackground">
    <header class="d-flex justify-content-between align-items-center p-1 bg-primary text-white">
        <a href="#"><img src="img/Tonbologo.png" class="img-responsive Tonbologo" alt="Logo" id="logo"
                style="width: 150px; height: 50px;"></a>
        <h1 class="flex-grow-1 text-center m-0">TI Sensor Data & Tracking</h1>
    </header>

    <div class="main-content">
        <aside class="sidebar">
            <div class="feature-list">
                <h3>Features</h3>
                <ul>
                    <li><span>TI Detector</span>
                        <ul class="sub-list">
                            <li><a href="#" onclick="toggleData('data1')">New Assembled Detector</a></li>
                            <li><a href="#" onclick="toggleData('data2')">Inspect & Sensitivity Test</a></li>
                        </ul>
                    </li>
                    <li><span>Rejections</span>
                        <ul class="sub-list">
                            <li><a href="#" onclick="toggleData('data3')">Sensor Replacement</a></li>
                            <li><a href="#" onclick="toggleData('data4')">Dust Sensor</a></li>
                        </ul>
                    </li>
                    <li><span>Assembled History</span>
                        <ul class="sub-list">
                            <li><a href="#" onclick="toggleData('data5')">Date-wise Assembled</a></li>
                            <li><a href="#" onclick="toggleData('data6')">Overall Assembled</a></li>
                        </ul>
                    </li>
                    <li><span>ODDO Status</span>
                        <ul class="sub-list">
                            <li><a href="#" onclick="toggleData('data7')">Update</a></li>
                        </ul>
                    </li>
                    <li><span>Detector History</span>
                        <ul class="sub-list">
                            <li><a href="#" onclick="toggleData('data8')">Tonbo Detector</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </aside>
        <div class="dashboard-content">
            <div id="default-content">
                <h2>Welcome to the Assembly Dashboard</h2>
            </div>

            <!-- Data elements will be displayed here based on the sublist item clicked -->
            <div id="data1" class="data" style="display: none;">
                <h2>New Assembled Detector</h2>
                <div class="form-container">
                    <div class="row-container">
                        <div class="total-count">Total Serial Numbers: <span id="total-serial-count">0</span></div>
                        <button class="save-button" onclick="saveData()">Save</button> <!-- Save button -->
                    </div>
                    <div class="table-container"></div>
                    <!-- New Detector Assembly Form -->
                    <form class="centered-form">
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="date">Date</label>
                                <input type="date" id="date" name="date" class="form-control">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="sensor-type">Type of Sensor</label>
                                <select name="sensor-type" id="sensor-type" class="form-control">
                                    <option value="">Select Sensor Type</option>
                                    <option value="option1">Option 1</option>
                                    <option value="option2">Option 2</option>
                                    <option value="option3">Option 3</option>
                                </select>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="assembled-by">Who Assembled Detectors</label>
                                <select name="assembled-by" id="assembled-by" class="form-control">
                                    <option value="">Select Assembler</option>
                                    <option value="option1">Option 1</option>
                                    <option value="option2">Option 2</option>
                                    <option value="option3">Option 3</option>
                                </select>
                            </div>
                        </div>
                        <div class="table-container">
                            <table id="my-table" class="table">
                                <thead>
                                    <tr>
                                        <th>SL.no</th>
                                        <th>Tonbo SL.no</th>
                                        <th>Sensor SL. No</th>
                                        <th>Proxy Board SL.no</th>
                                        <th>Power Board SL.no</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td><input type="text" name="tonbo-sl-no" class="form-control small-input"
                                                oninput="addNewRow(this)"></td>
                                        <td><input type="text" name="sensor-sl-no" class="form-control small-input">
                                        </td>
                                        <td><input type="text" name="proxy-board-sl-no"
                                                class="form-control small-input"></td>
                                        <td><input type="text" name="power-board-sl-no"
                                                class="form-control small-input"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div>
            </div>




            <div id="data2" class="data">
                <h2>Inspect & Sensitivity Test</h2>
                <div class="container">
                    <div class="header">
                        
                    </div>
                    
                    <form>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="date">Date</label>
                                <input type="date" id="date" name="date" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="who-tested-sensor">Who tested Sensor</label>
                                <select id="who-tested-sensor">
                                    <option value="">Select</option>
                                    <option value="option1">Option 1</option>
                                    <option value="option2">Option 2</option>
                                    <option value="option3">Option 3</option>
                                    <!-- Options go here -->
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="sensor-type">Type of Sensor</label>
                                <select name="sensor-type" id="sensor-type" class="form-control">
                                    <option value="">Select Sensor Type</option>
                                    <option value="option1">Option 1</option>
                                    <option value="option2">Option 2</option>
                                    <option value="option3">Option 3</option>
                                </select>
                            </div>
                            
                        </div>
                        <div class="form-row centered">
                            <div class="form-group col-md-4">
                                <label for="search-sl-no">Search SL.No</label>
                                <div style="position: relative;">
                                    <input type="text" id="search-sl-no" class="form-control" onkeyup="searchTable()">
                                    <span style="position: absolute; right: 10px; top: 10px;">
                                        <img src="/img/search.png" alt="Search" style="height: 20px; width: 20px;">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="counts-container">
                        <div class="count-box new-count-box">
                            <div class="count-item new-count-item">
                                <p class="count-title new-count-title">Pass Count</p>
                                <p class="count-value new-count-value" id="pass-count">P-0</p>
                            </div>
                            <div class="count-divider new-count-divider"></div> <!-- Vertical line -->
                            <div class="count-item new-count-item">
                                <p class="count-title new-count-title">Fail Count</p>
                                <p class="count-value new-count-value" id="fail-count">F-0</p>
                            </div>
                        </div>
                    </div>

                    <table class="table">
                        <thead>
                            <tr>
                                <th>Select</th>
                                <th>TI SL.No</th>
                                <th>Status</th>
                                <th>Sensitivity Check List</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox"></td>
                                <td>TUV-9008555</td>
                                <td>
                                    <select class="status-dropdown" onchange="updateStatusCount(this)">
                                        <option value="">Select</option>
                                        <option value="pass" class="status-pass">Pass</option>
                                        <option value="fail" class="status-fail">Fail</option>
                                    </select>
                                </td>
                                <td>
                                    <div class="checklist">
                                        <label><input type="checkbox"> criteria 1</label>
                                        <label><input type="checkbox"> criteria 2</label>
                                        <label><input type="checkbox"> criteria 3</label>
                                        <label><input type="checkbox"> criteria 4</label>
                                        <label><input type="checkbox"> criteria 5</label>
                                    </div>
                                </td>

                            </tr>
                            <!-- More rows can go here -->
                        </tbody>
                    </table>
                    <div class="footer">
                     
                        <button class="save-button" id="positioning">SAVE</button>
                    </div>
                </div>
            </div>

            <script>
                function updateStatusCount(selectElement) {
                    let passCountElement = document.getElementById("pass-count");
                    let failCountElement = document.getElementById("fail-count");

                    let passCount = parseInt(passCountElement.textContent.split('-')[1]);
                    let failCount = parseInt(failCountElement.textContent.split('-')[1]);

                    let previousStatus = selectElement.getAttribute("data-previous-status");
                    let newStatus = selectElement.value;

                    if (previousStatus === "pass") {
                        passCount--;
                    } else if (previousStatus === "fail") {
                        failCount--;
                    }

                    if (newStatus === "pass") {
                        passCount++;
                    } else if (newStatus === "fail") {
                        failCount++;
                    }

                    passCountElement.textContent = 'P-' + passCount;
                    failCountElement.textContent = 'F-' + failCount;

                    selectElement.setAttribute("data-previous-status", newStatus);
                }
                function searchTable() {
                    let input = document.getElementById("search-sl-no").value.toUpperCase();
                    let table = document.querySelector(".table tbody");
                    let rows = table.getElementsByTagName("tr");

                    for (let i = 0; i < rows.length; i++) {
                        let td = rows[i].getElementsByTagName("td")[1];
                        if (td) {
                            let txtValue = td.textContent || td.innerText;
                            if (txtValue.toUpperCase().indexOf(input) > -1) {
                                rows[i].style.display = "";
                            } else {
                                rows[i].style.display = "none";
                            }
                        }
                    }
                }
            </script>



            <div id="data3" class="data">
                <h2>Board and Sensor Replacement</h2>
                <div class="search-container">
                    <label for="search-sl-no">Serial.No </label>
                    <input type="text" id="search-sl-no" class="form-control">
                    <button class="search-btn"><img src="search-icon.png" alt="Search"></button>
                </div>
                <div class="status-count-container">
                    <div class="status-container">
                        <div class="status-item">
                            <span class="status-title">Failed</span>
                        </div>
                        <div class="status-divider"></div> <!-- Divider -->
                        <div class="status-item">
                            <span class="status-title">Issue will be displayed</span>
                        </div>
                    </div>
                    <div class="counts-container">
                        <div class="count-box">
                            <div class="count-item">
                                <p class="count-title">Sensor Count</p>
                                <p class="count-value" id="sensor-count">0</p>
                            </div>
                            <div class="count-divider"></div> <!-- Vertical line -->
                            <div class="count-item">
                                <p class="count-title">Board Count</p>
                                <p class="count-value" id="board-count">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            <table id="sensor-table">
                <thead>
                    <tr>
                        <th>PARTS No</th>
                        <th>DATE</th>
                        <th>DATE</th>
                        <th>DATE</th>
                        <th>ADD</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" name="part-no" class="form-control small-input"></td>
                        <td><input type="text" name="date-1" class="form-control small-input"></td>
                        <td><input type="text" name="date-2" class="form-control small-input"></td>
                        <td><input type="text" name="date-3" class="form-control small-input"></td>
                        <td><button class="edit-btn">Edit</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="add-row-btn">Add Row</button>
        </div>


        <script>
            function toggleData3() {
                var data3 = document.getElementById('data3');
                if (data3.style.display === 'none') {
                    data3.style.display = 'block';
                } else {
                    data3.style.display = 'none';
                }
            }

            document.addEventListener('DOMContentLoaded', function () {
                var currentSLno = 1; // Initialize SL.no counter

                function addNewRow() {
                    var table = document.getElementById("sensor-table").getElementsByTagName('tbody')[0];
                    var newRow = table.insertRow(); // Insert a new row
                    currentSLno++; // Increment SL.no counter
                    newRow.innerHTML = `
                            <td><input type="text" name="part-no" class="form-control small-input"></td>
                            <td><input type="text" name="date-1" class="form-control small-input"></td>
                            <td><input type="text" name="date-2" class="form-control small-input"></td>
                            <td><input type="text" name="date-3" class="form-control small-input"></td>
                            <td><button class="edit-btn">Edit</button></td>
                        `;
                }

                // Add event listener for add row button
                document.querySelector('.add-row-btn').addEventListener('click', addNewRow);

                // Hide data3 initially
                document.getElementById('data3').style.display = 'none';
            });
        </script>

           v id="data4" class="data">
            <h1 class="dust-textsize">Dust Sensor Module</h1>
            <div class="container">
                <span class="sensor-count">Sensor Count : 4</span>
                <div class="form-group col-md-4">
                    <label for="date">Date</label>
                    <input type="date" id="date" name="date" class="form-control">
                </div>
                <div class="search-section">
                    <label for="search-slno">Search SL.No :</label>
                    <input type="text" id="search-slno" />
                    <button class="search-button">&#128269;</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>SL.No</th>
                            <th>TI SL.No</th>
                            <th>Status</th>
                            <th>Rejection</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>TUV-9001234</td>
                            <td>
                                <select class="status-dropdown">
                                    <option value="passed" class="passed">PASSED</option>
                                    <option value="failed" class="failed">FAILED</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value=""></option>
                                    <option value="yes">YES</option>
                                    <option value="no">NO</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>TUV-9001234</td>
                            <td>
                                <select class="status-dropdown">
                                    <option value="passed" class="passed">PASSED</option>
                                    <option value="failed" class="failed">FAILED</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value=""></option>
                                    <option value="yes">YES</option>
                                    <option value="no">NO</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>TUV-9001234</td>
                            <td>
                                <select class="status-dropdown">
                                    <option value="passed" class="passed">PASSED</option>
                                    <option value="failed" class="failed">FAILED</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value=""></option>
                                    <option value="yes">YES</option>
                                    <option value="no">NO</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>TUV-9001234</td>
                            <td>
                                <select class="status-dropdown">
                                    <option value="passed" class="passed">PASSED</option>
                                    <option value="failed" class="failed">FAILED</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value=""></option>
                                    <option value="yes">YES</option>
                                    <option value="no">NO</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="footer">
                    <div class="form-group col-md-4">
        
                        <label for="cleared-dust">Who cleared Dust </label>
                        <select id="cleared-dust">
                            <option value=""></option>
                            <option value="person1">Person 1</option>
                            <option value="person2">Person 2</option>
                            <option value="person3">Person 3</option>
                        </select>
                    </div>
        
                    <button class="save-buttons">SAVE</button>
                </div>
        
            </div>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const statusDropdowns = document.querySelectorAll(".status-dropdown");

                statusDropdowns.forEach((dropdown) => {
                    dropdown.addEventListener("change", function () {
                        applyStyles(dropdown);
                    });
                    applyStyles(dropdown); // Apply styles on page load based on initial value
                });

                function applyStyles(dropdown) {
                    const selectedOption = dropdown.options[dropdown.selectedIndex];
                    if (selectedOption.classList.contains("passed")) {
                        dropdown.style.backgroundColor = "#d4edda";
                        dropdown.style.color = "#155724";
                    } else if (selectedOption.classList.contains("failed")) {
                        dropdown.style.backgroundColor = "#f8d7da";
                        dropdown.style.color = "#721c24";
                    } else {
                        dropdown.style.backgroundColor = "";
                        dropdown.style.color = "";
                    }
                }
            });
        </script>


        <div id="data5" class="data">
            <h2>Date-wise Assembled</h2>
            <p>This is the data for the Date-wise Assembled feature.</p>
        </div>

        <div id="data6" class="data">
            <h2>Overall Assembled</h2>
            <p>This is the data for the Overall Assembled feature.</p>
        </div>

        <div id="data7" class="data">
            <h2>Update ODDO</h2>
            <p>This is the data for the ODDO status feature.</p>
        </div>

        <div id="data8" class="data">
            <h2>Tonbo Detector</h2>
            <p>This is the data for the Tonbo Detector feature.</p>
        </div>
    </div>
    </div>

    <footer id="footer" class="bg-dark text-white text-center py-0 mt-0">
        <p class="m-0">Tonbo Imaging &copy; 2024</p>
    </footer>

    <script>
        function toggleData(id) {
            var dataElement = document.getElementById(id);
            var defaultContent = document.getElementById('default-content');

            // Hide the default content
            defaultContent.style.display = "none";

            var allDataElements = document.querySelectorAll('.data');

            // Hide all data elements first
            allDataElements.forEach(function (element) {
                element.style.display = "none";
            });

            // Show the data corresponding to the clicked sublist
            dataElement.style.display = "block";
        }

        var currentSLno = 1; // Initialize SL.no counter

        function addNewRow(input) {
            var currentRow = input.closest('tr'); // Get the current row
            var table = document.getElementById("my-table");

            // Check if the current row is the last row
            var isLastRow = currentRow === table.rows[table.rows.length - 1];

            // If the input value is empty and not the last row, delete the row
            // Ensure that the first row is never removed
            if (input.value.trim() === '' && !isLastRow && currentRow.rowIndex !== 1) {
                table.deleteRow(currentRow.rowIndex);
                // Update the total count
                updateTotalSerialCount();
                // Update SL.no for the remaining rows
                updateSerialNumbers();
                return;
            }

            // If the current row is the last row, add a new row
            if (input.value.trim() !== '' && isLastRow) {
                var newRow = table.insertRow(); // Insert a new row
                currentSLno++; // Increment SL.no counter
                newRow.innerHTML = `
            <td>${currentSLno}</td>
            <td><input type="text" name="tonbo-sl-no" class="form-control small-input" oninput="handleInput(this, 'tonbo-sl-no')"></td>
            <td><input type="text" name="sensor-sl-no" class="form-control small-input" oninput="handleInput(this, 'sensor-sl-no')"></td>
            <td><input type="text" name="proxy-board-sl-no" class="form-control small-input" oninput="handleInput(this, 'proxy-board-sl-no')"></td>
            <td><input type="text" name="power-board-sl-no" class="form-control small-input" oninput="handleInput(this, 'power-board-sl-no')"></td>
        `;

                // Automatically focus on the first input field in the new row
                newRow.querySelector('input[name="tonbo-sl-no"]').focus();

                // Update the total count
                updateTotalSerialCount();
            }
        }

        function handleInput(input, columnName) {
            var currentRow = input.closest('tr'); // Get the current row
            var table = document.getElementById("my-table");

            // Add a new row if this is the last row and the input value is not empty
            addNewRow(input);

            // Move to the next row in the same column if the current input is not empty
            if (input.value.trim() !== '') {
                var nextRow = currentRow.nextElementSibling;
                if (nextRow) {
                    var nextInput = nextRow.querySelector(`input[name="${columnName}"]`);
                    if (nextInput) {
                        nextInput.focus();
                    }
                }
            }
        }

        function updateTotalSerialCount() {
            var table = document.getElementById("my-table");
            var rowCount = 0;

            // Count the number of filled Tonbo SL.no cells
            for (var i = 1, row; row = table.rows[i]; i++) {
                var tonboCell = row.cells[1].querySelector('input[name="tonbo-sl-no"]');
                if (tonboCell && tonboCell.value.trim() !== '') {
                    rowCount++;
                }
            }

            // Update the total count display
            document.getElementById('total-serial-count').textContent = rowCount;
        }

        // Update SL.no for the remaining rows after deletion
        function updateSerialNumbers() {
            var table = document.getElementById("my-table");
            for (var i = 1; i < table.rows.length; i++) {
                table.rows[i].cells[0].textContent = i;
            }
        }

        // Add event listeners to all input fields for the initial row
        document.querySelectorAll('input[name="tonbo-sl-no"], input[name="sensor-sl-no"], input[name="proxy-board-sl-no"], input[name="power-board-sl-no"]').forEach(function (input) {
            input.addEventListener('input', function () {
                handleInput(this, input.name);
                updateTotalSerialCount(); // Update the total count when any input changes
            });
        });

        // Update total count initially
        updateTotalSerialCount();

    </script>


</body>

</html>